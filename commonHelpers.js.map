{"version":3,"file":"commonHelpers.js","sources":["../src/fetchCountries.js","../src/useDebounce.js","../src/index.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst BASE_URL = 'https://restcountries.com/v3.1';\nconst REQUEST_PARAMETERS = 'name,capital,population,flags,languages';\n\nasync function fetchCountriesByName(search = '') {\n  try {\n    const response = await fetch(\n      `${BASE_URL}/name/${search}?fields=${REQUEST_PARAMETERS}`\n    );\n    if (!response.ok) {\n      throw new Error(`${response.status} ${response.statusText}`);\n    }\n    return response.json();\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Oops, there is no country with that name',\n    });\n  }\n}\n\nexport { fetchCountriesByName };\n","export default function debounce(func, timeout = 300) {\n  let timer;\n  return function (...args) {\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      func.apply(this, args);\n    }, timeout);\n  };\n}\n","import { fetchCountriesByName } from './fetchCountries';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport debounce from './useDebounce';\n\nconst nameField = document.querySelector('#search-box');\nconst countriesList = document.querySelector('.country-list');\nnameField.addEventListener('input', debounce(handleName));\n\nasync function handleName(e) {\n  let countries = [];\n  let value = e.target.value.trim();\n  countriesList.replaceChildren();\n  if (value !== '') {\n    countries = await fetchCountriesByName(value);\n  }\n\n  if (countries.length >= 10) {\n    iziToast.success({\n      position: 'topRight',\n      message: 'Too many matches found. Please enter a more specific name.',\n    });\n  }\n  if (countries.length > 2 && countries.length < 10) {\n    countriesList.insertAdjacentHTML('beforeend', initCountryItem(countries));\n  }\n\n  if (countries.length === 1) {\n    countriesList.insertAdjacentHTML(\n      'beforeend',\n      initCountryItem(countries, true)\n    );\n  }\n}\n\nfunction initCountryItem(items, single = false) {\n  return items\n    .map(\n      ({ name, flags, capital, population, languages }) => `\n    <li>\n      <div class=\"country-list__general\">\n        <img src=\"${flags.svg}\" alt=\"${name.official}\" width=\"30\"/>\n        ${!single ? `<p>${name.official}</p>` : `<h2>${name.official}</h2>`}\n      </div>\n      <div class=\"country-list__sub-info ${!single && 'hidden'}\">\n        <div>\n          <p>\n            <strong>Capital:</strong>\n          </p>\n          <p>${capital}</p>\n        </div>\n        <div>\n          <p>\n            <strong>Population:</strong>\n          </p>\n          <p>${population}</p>\n        </div>\n        <div>\n          <p>\n            <strong>Languages:</strong>\n          </p>\n          <p>${Object.values(languages)}</p>\n        </div>\n      </div>\n    </li>\n  `\n    )\n    .join('');\n}\n"],"names":["BASE_URL","REQUEST_PARAMETERS","fetchCountriesByName","search","response","iziToast","debounce","func","timeout","timer","args","nameField","countriesList","handleName","e","countries","value","initCountryItem","items","single","name","flags","capital","population","languages"],"mappings":"svBAEA,MAAMA,EAAW,iCACXC,EAAqB,0CAE3B,eAAeC,EAAqBC,EAAS,GAAI,CAC/C,GAAI,CACF,MAAMC,EAAW,MAAM,MACrB,GAAGJ,UAAiBG,YAAiBF,GAC3C,EACI,GAAI,CAACG,EAAS,GACZ,MAAM,IAAI,MAAM,GAAGA,EAAS,UAAUA,EAAS,YAAY,EAE7D,OAAOA,EAAS,MACjB,MAAC,CACAC,EAAS,MAAM,CACb,SAAU,WACV,QAAS,0CACf,CAAK,CACF,CACH,CCpBe,SAASC,EAASC,EAAMC,EAAU,IAAK,CACpD,IAAIC,EACJ,OAAO,YAAaC,EAAM,CACxB,aAAaD,CAAK,EAClBA,EAAQ,WAAW,IAAM,CACvBF,EAAK,MAAM,KAAMG,CAAI,CACtB,EAAEF,CAAO,CACd,CACA,CCHA,MAAMG,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAgB,SAAS,cAAc,eAAe,EAC5DD,EAAU,iBAAiB,QAASL,EAASO,CAAU,CAAC,EAExD,eAAeA,EAAWC,EAAG,CAC3B,IAAIC,EAAY,CAAA,EACZC,EAAQF,EAAE,OAAO,MAAM,KAAI,EAC/BF,EAAc,gBAAe,EACzBI,IAAU,KACZD,EAAY,MAAMb,EAAqBc,CAAK,GAG1CD,EAAU,QAAU,IACtBV,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,4DACf,CAAK,EAECU,EAAU,OAAS,GAAKA,EAAU,OAAS,IAC7CH,EAAc,mBAAmB,YAAaK,EAAgBF,CAAS,CAAC,EAGtEA,EAAU,SAAW,GACvBH,EAAc,mBACZ,YACAK,EAAgBF,EAAW,EAAI,CACrC,CAEA,CAEA,SAASE,EAAgBC,EAAOC,EAAS,GAAO,CAC9C,OAAOD,EACJ,IACC,CAAC,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,WAAAC,EAAY,UAAAC,CAAS,IAAO;AAAA;AAAA;AAAA,oBAGvCH,EAAM,aAAaD,EAAK;AAAA,UACjCD,EAAqC,OAAOC,EAAK,gBAAxC,MAAMA,EAAK;AAAA;AAAA,2CAEY,CAACD,GAAU;AAAA;AAAA;AAAA;AAAA;AAAA,eAKvCG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAMAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAMA,OAAO,OAAOC,CAAS;AAAA;AAAA;AAAA;AAAA,GAKjC,EACA,KAAK,EAAE,CACZ"}